
<!DOCTYPE html>
<html lang="en">

<head>
    <title>Wheelchair Basketball Project</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="index.css">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
</head>

<body>
    <!-- Add later navbar-fixed-ontop -->
<nav class="navbar transparent navbar-inverse" >
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav navbar-right">
                    <li class="underlined active"><a href="index.html" class="fix-underline-a"><font color="black">HOME</font></a></li>
                    <li class="underlined"><a href="requirements.html"><font color="black">REQUIREMENTS</font></a></li>
                    <li class="underlined"><a href="research.html"><font color="black">RESEARCH</font></a></li>
                    <li class="underlined"><a href="hci.html"><font color="black">HCI</font></a></li>
                    <li class="underlined"><a href="design.html"><font color="black"><b><u>DESIGN</u></b></font></a></li>
                    <li class="underlined"><a href="testing.html"><font color="black">TESTING</font></a></li>
                    <li class="underlined"><a href="evaluation.html"><font color="black">EVALUATION</font></a></li>
                    <li class="underlined"><a href="management.html"><font color="black">MANAGEMENT</font></a></li>
                </ul>
            </div>
        </div>
    </nav>

 <div class="container">
    <div class="row">
        <div id="my=nav" class ="span3">
            <ul class="nav nav-list affix">
                <li><a href="#section1">System Architecture</a></li>
                <li><a href="#section2">Class Diagram</a></li>
                <li><a href="#section3">Sequence Diagram</a></li>
                <li><a href="#section4">Design Patterns</a></li>
                <li><a href="#section5">Data Storage</a></li>
                <li><a href="#section6">Key Functionalities</a></li>

            </ul>
        </div>
        <div class="span9 my-content">
            <section id="section1">
              <div class="container-fluid">
                <h2><strong> System Architecture</strong></h2>
                <p>Our system is made up of different components that make up a set of tools. The following subsections make up the system as a whole:</p>
            </div>
            <div class="container-fluid">
                <h3>Json File Generator</h3>
                <p>This program was developed to emulate the JSON data one would get from the fitbit api. The program also has the advantage of being able to create as many users with as many activities one would want. All the data that is generated is around 90% accurate, with statistics such as calories calculated using the MET value for that particular type of activity. The process is also automated using a bash script that is found within the application folder. The future of this application could be found in different research areas, where scientists could study this generated data and perform analysis on it.
</p>
            </div>
            <div>
                <img src="img/jsonpic.png" style="width:1200px;height:200px;">

            </div>
            <div class="container-fluid">
                <h3>Cloud</h3>
                <p>The main idea behind our application is to allow users to see their data online as well. Thus, the mobile application sends POST requests to a RESTful API composed of a nodejs server and a cosmos database from Microsoft Azure. At first, the system was tested locally using a nodejs server and a mongodb database. After successfully establishing the connection between the Android application and the previous components, we deployed everything on Azure. The way the system now works is every time the json file is modified within the android application, a post request will be sent to the nodejs server which will update the cosmos database. In the future, we would like to add functions for data retrieval which would therefore eliminate the need of using any internal storage used by the android application.  </p>
            </div>
          <div class="container-fluid">
                <img src="img/cloud.png" style="width:1000px;height:300px;">


            </div>
            <div class="container-fluid">
                <h3>ARCCS Sensor Visualiser</h3>

                <p>Initially designed for the ARCCS sensors provided by Dr. Catherine Holloway, this program is able to plot the data that one would get from the sensors in different file formats such as csv. It parses the entire file and then displays the data using JFreeChart, currently plotting the acceleration and gyroscope data by the x,y coordinates. Thus, it can be used to observe relevant changes in the motion of the objects the sensors are attached to. For example, we used it to measure the number of wheel rotations the user performs during a session for recording data from the sensors. To access the visualiser, the user uses a simple GUI created using Swing.</p>

                <img src="img/visualiser.png" style="width:1200px;height:200px;">



            </div>
            <div class="container-fluid">
                <h3>Android Mobile Application</h3>
                <p>he end user side of the application, we created an Android Application in Android Studio. The application is integrated with the Json file generator (which is partially modified to fit the needs of our application), and displays and analyses the emulated data. After any modification that happens to the json from the internal memory of the phone, the application sends a POST request to a nodejs server, which inserts it into a Mongo database.

 </p>
            </div>


            <div class="container-fluid">
                <h3>Angularjs App</h3>
                <p>In order to retrieve fitbit data from one user, we are using a separate angularjs application. It is connected to a fitbit developer account. In order to use the application, one would need a Fitbit wristband connected to such an account. After performing all these steps, one can retrieve any type of data from the apis that are found within the Fitbit API. For the moment, tt displays just the heart rate, but the code can be changed to display almost anything from the api.</p>
          </div>
          <div class="container-fluid">
                <img src="img/fitbit.png" style="width:1000px;height:300px;">


            </div>
     



            </section>
            <section id="section2">
            <div class="container">
                <div class="container-fluid">
                <h2><strong> Class Diagram</strong></h2>

                <img src="img/uml.png" style="width:1200px;height:600px;">

            </div>
          </div>


            </section>
            <section id="section3">
                <div class="container">
                <div class="container-fluid">
                <h2><strong> Sequence Diagram</strong></h2>
            </div>
            <img src="img/sequence.png" style="width:1200px;height:400px;">
        </div>

            </section>
            <section id="section4">
                <div class="container-fluid">
                <h2><strong> Design Patterns</strong></h2>
            </div>

            <div class="container-fluid">
                <h3>Singleton</h3>

                <p>
                  The singleton pattern is a creational design pattern which provides a way to create a
                  singular object. This pattern involves a single class which is responsible to create an object
                  while making sure that only single object gets created. This class provides a way to access
                  its only object which can be accessed directly without need to instantiate the object of the
                  class.
                </p>

                <p>For our application, we are restricting the DataController and JSONSender to only have one instance per session. This means that all the data generation and calculations are handled by the same controller, and everything that has to do with post requests is done by the same sender object whenever a change occurs within the JSON file stored and has to be sent to the server and update the database. To further support the memory management of our application, we use a lazy implementation of the singletons so that the instance is only created when the app requests access to the controller or sender object (via the getInstance() method).</p>

                <h3>Dependency Injection</h3>
                <p>
                  Dependency injection is a technique whereby one object supplies the dependencies of another object
                  meaning objects are given their dependencies at run time rather than compile time. We have used this
                  throughout our application, for example in our adapters, to customise the passed objects.
                </p>

                <h3>Builder</h3>

                <p>The builder pattern involves creating an object in a step by step approach by creating
                   simpler objects contained in the final one first. One of the classes that is found in our project is the User class. It contains all the information that we need
                   from a user and all of this is stored in the json file. Due to the fact that it has many fields, we wanted to
                   separate the construction of this more complex objects from its representation. Thus, in case we want to create
                   numerous users, the same construction process is used to create different representations. All from the above
                   is handled by the UserBuilder class:</p>

                <h3>MVC</h3>

                <p>
                  MVC Pattern stands for model-view-controller Pattern. This pattern is used to separate
                  application with the user interface. The model represents the class which holds the data. It
                  has the logic to update controller if its data changes.The view represents the visualisation
                  (user interface) of the data that model contains. The controller acts on both model and
                  view. It controls the data flow into model object and updates the view whenever data
                  changes. It keeps view and model separate. We use this design pattern to separate all the
                  training session data with the user interface.
                </p>
            </div>


            </section>
            <section id="section5">
                <div class="container-fluid">
                    <h2><strong> Data Storage</strong></h2>

                    <p>
                      Due to the fact that our entire system is based upon an Android application consuming a RESTful API, we process
                       the data first internally using JSON. The file itself is a JSON array, which contains all the relevant data about
                        the users and their games. Each user is a JSON object which contains different relevant fields as well as a JSON
                         array of games. The structure of the file is the following:
                    </p>

                    <img src="img/storage1.png">

                    <p>
                      The file is then stored within the phone and is sent using POST requests to the Nodejs server which inserts the
                       data into the Mongo database. The file is then parsed object by object and saved using mongoose and schemas as seen below.
                       In the end, the server and the database are hosted using Microsoft Azure. The Mongo database is imported and emulated using CosmosDB.
                    </p>


                    <img src="img/storage2.png" style="width:300px;height:400px;">
                    <img src="img/storage3.png" style="width:400px;height:300px;">

                </div>
            </section>


            <section id="section6">
              <div class="container-fluid">
                <h2><strong> Key Functionalities Implementation</strong></h2>



              <h3>Front End Technologies</h3>

              <p>The front end part of the application was built primarily using XML files and layout to create and customise the different screens of our application. XML is completely compatible with Java and is fully portable to be used with any application that can process it. It allowed us to create an interactive and functional display which, when combined with the application logic, creates an attractive and easy to use user experience.</p>

              <p>Using Android Studio allowed us to quickly create and adjust these files using their interface. From creating different objects such as buttons, to managing the multiple different views possible. A number of different images and familiar icons relating to basketball were also added to the app.
              </p>

              <h4>Variables Display</h4>
              <p>The application uses two different adapters in order to create customisable horizontal and vertical listview displays. The list adapter is used to alter the regular listview object. It allows the application to support multiple different user defined display types in the list by specifying the “Type” parameter. For instance, if a new display, such as a mini graph for heart rate, is required, the system could easily support this addition. The recycler adapter is used to create a horizontal list display. This comes with a click listener which handles changes in the graph display.</p>

              <h4>Graphs</h4>
              <p>A major functionality of the front end design makes use of the MPAndroid Chart Library by PhilJay to display a graphical representation of the data. Bar Charts were used to display a summary of a data variable. These particular data variables are selected by the user in the Recycler View which communicates with the graph display to automatically update its contents upon selection with animations. The graph also features two different types of listeners. The first is a normal press which will result in the game name of the selected bar popping up on the screen. The second is a long press which will take the user to GameDisplay page for that game. </p>


              <h4>Scaling</h4>
              <p>All pages are scalable to different device sizes through the use of layout weights and scroll views. For example, the main dashboard will adjust accordingly to fit the screen, giving emphasis on larger widgets such as the graph display as this is key to the importance of the app. Longer display string variables will also have their font size reduced to avoid overlapping widgets.  </p>


              <h4>Input Assistance and Feedback</h4>
              <p>All user input fields have keyboard entry tools related to the type of input required. For example, auto word capitalisation for titles, number pads for integer inputs and . In particular, the system includes date and time picker widgets which restrict invalid characters and automatically output data in required formats for DataController.
              Any key functionalities performed, such as adding and deleting a game, are followed up by popup toast messages to inform the user of the action performed. This helps ensure they know the action was successful.
              </p>

              <h4>Analytics</h4>
              <p>
                Our system utilises Facebook’s analytics system. This provides an insight on app usage and user engagement. We used this to track how many unique users accessed the app and how frequently. It also provides us with information about the kind of user using the app.
              </p>

          <img src="img/FacebookAnalytics.png">

              <h3>Back End Functionalities</h3>



            <h4><p>JSON File Generator</p></h4>
            <p>The Android application ”GameOn!” is using the Json File Generator logic to create the data for the user when he adds new training sessions. There is however a small difference, which is the use of the library Gson. This helps us use normal java code that then is converted to json objects and json arrays. </p>
            <p>For example, a user object is converted to a json object, whereas an ArrayList could be converted to a json array containing different json objects. Therefore, this increases our consistency throughout the code without using any additional libraries to write the data to the json file besides the normal FileWriter and streams. </p>
            <p>The generation of data is handled by the Random class (for different types of number) and there are certain restrictions that do not allow miscalculations to happen. Different variables such as calories are calculated using the MET value of wheelchair basketball (from the compendium of sports https://sites.google.com/site/compendiumofphysicalactivities/Activity-Categories/sports), while also taking into consideratino the weight. </p>

                  <h4><p>Server</p></h4>
            <p>To be able to send post requests to the nodejs server, we are using the Volley library. After the file has been received by the server, the data is processed and sent to the Mongo database using the Mongoose module. </p>

                  <h4><p>ARCCS Sensors</p></h4>
            <p>As for the ARCCS visualiser, we are parsing the csv file using a parser and storing everything into maps and arraylists, from which we can easily retrieve the data and process display it using JFreeChart. </p>




</div>

            </div>

            </section>

            <section id="section7">

            </section>
</div>
</div>
</div>

    <footer class="footer-distributed">

        <div class="footer-left">
            <p>

                COMP214P Systems Engineering - Team 31
            </p>
        </div>

    </footer>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</body>

</html>
